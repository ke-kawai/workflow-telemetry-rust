# なぜこのプロジェクトを作っているのか

## 背景

既存の`catchpoint/workflow-telemetry-action`には致命的な問題がある：

### セキュリティ上の問題

1. **バイナリブラックボックス**
   - `proc_tracer_ubuntu-20` / `proc_tracer_ubuntu-22`のソースコード非公開
   - 1.2MB〜1.6MBのELFバイナリの内部挙動を検証不可能
   - プロセス情報収集時に何をしているか不明

2. **外部API依存**
   - グラフ生成に`https://api.globadge.com/v1/chartgen/`を使用
   - **ワークフローのメトリクスデータを外部サービスに送信**
   - CPU/メモリ/ネットワーク/ディスクI/Oなどの機密情報が流出
   - データプライバシーとコンプライアンスのリスク

3. **データ漏洩リスク**
   - プロセス引数やファイルパスに機密情報（API KEY、内部パス等）が含まれる可能性
   - 外部API経由で第三者に送信されるリスク

## 解決策：Rust完全書き直し

### 設計原則

1. **完全なローカル処理**
   - 外部API呼び出しゼロ
   - SVGグラフを`plotters`で生成
   - 全てのデータはGitHub Actions内で完結

2. **100%透明性**
   - 全コードをオープンソース化
   - バイナリもビルド可能
   - 何をしているか完全に検証可能

3. **最小限のコード**
   - MVP: CPU監視のみ
   - 478行の最小実装
   - 846KBの軽量バイナリ

## アーキテクチャ

```
┌─────────────────────────────────────┐
│ GitHub Actions Runner (Linux)       │
│                                     │
│  ┌──────────────────────────────┐  │
│  │ telemetry バイナリ           │  │
│  │                              │  │
│  │  1. /proc/stat 読み取り      │  │
│  │  2. CPU使用率計算           │  │
│  │  3. SVG生成 (plotters)      │  │
│  │  4. Markdown生成            │  │
│  │  5. $GITHUB_STEP_SUMMARY    │  │
│  │     に書き込み              │  │
│  └──────────────────────────────┘  │
│                                     │
│  外部通信: なし                      │
└─────────────────────────────────────┘
```

## 実装フェーズ

### Phase 1: MVP (完了)
- CPU監視
- SVG生成
- GitHub Summary出力

### Phase 2: 追加メトリクス (未実装)
- メモリ
- ネットワークI/O
- ディスクI/O

### Phase 3: プロセストレース (未実装)
- eBPF使用
- プロセス監視

## デプロイ方法

1. Linux環境でビルド
2. バイナリ`telemetry`をコミット
3. `action.yml`がバイナリを実行

proc-tracerと同じパターン。ソースコードは公開、バイナリも検証可能。
